datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

// Prisma schema for User and Attendance models in production

model User {
    id             String       @id @default(cuid()) // Use globally unique IDs
    name           String
    email          String       @unique
    password       String       @db.VarChar(255) // Stored for extra layer in user accounts
    profilePicture String? // Optional
    role           Role         @default(USER) // Enum: USER or ADMIN
    createdAt      DateTime     @default(now())
    updatedAt      DateTime     @updatedAt
    attendance     Attendance[] @relation("UserAttendance") // Relation with Attendance
}

model Attendance {
    id          Int        @id @default(autoincrement())
    userId      String // Matches User's id field
    date        DateTime   @default(now())
    status      StatusEnum @default(Absent)
    leaveReason String?
    createdAt   DateTime   @default(now())

    user User @relation("UserAttendance", fields: [userId], references: [id])
}

enum StatusEnum {
    Present
    Absent
    Leave
}

enum LeaveStatusEnum {
    Pending
    Approved
    Declined
}

enum Role {
    USER
    ADMIN
}
